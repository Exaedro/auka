<!DOCTYPE html>
<html lang="es" data-id_usuario="<%- usuario.id_usuario %>" data-nombre="<%- usuario.nombre %>" data-apellido="<%- usuario.apellido %>" data-tipo_usuario="<%- usuario.tipo_usuario %>">
<head>
    <%- include('../parciales/head.html') %>
    <link rel="stylesheet" href="panel.css">

    <!-- ICONOS (Font Awesome) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <!-- SOCKET.IO -->
    <script type="module" src="/socket.io/socket.io.js"></script>
    <script type="module" src="./js/panel/profesor.js"></script>
</head>
<body>
    <div class="panel-contenedor">
        <div class="navbar">
            <h1>Auka</h1>
            <div>
                <p>Parrafo 1</p>
                <p>Parrafo 2</p>
            </div>
        </div>
            <div class="formulario-llamado">
                <form action="" method="GET" id="formulario">
                    <div class="formulario-cabecera">
                        <h2>Realizar llamado</h2>
                    </div>
                    <label for="">Seleccionar preceptor</label>
                    <select name="preceptor" id="">
                        <option value="0">Enviar a todos</option>
                        <option value="1">Alejandro</option>
                        <option value="2">Noemi</option>
                    </select>
                    <label for="">Mensaje</label>
                    <textarea name="mensaje" placeholder="Necesito un preceptor en L1..." name="mensaje"></textarea>
                    <label for="">Nivel de importancia</label>
                    <select name="nivel" id="">
                        <option value="0">Alta</option>
                        <option value="1">Medio</option>
                        <option value="2">Baja</option>
                    </select>

                    <% if(typeof llamado !== 'undefined' && llamado.data.finalizado == 0) { %>
                        <button type="button" id="boton-llamado" disabled>Llamar preceptor</button>
                    <% } else { %>
                        <button type="button" id="boton-llamado">Llamar preceptor</button>
                    <% } %>

		        </form>
		        <div class="estado-llamado <%= (typeof llamado.data.id === 'undefined' || llamado.data.finalizado == 1) ? 'esconder' : '' %>">  
                    <p class="estado-llamado-titulo">

                        <% if(typeof llamado.respuesta.id === 'undefined' || llamado.data.finalizado == 1) { %>
                            Estado de tu llamado
                        <% } else { %>
                            <%= llamado.respuesta.usuario.nombre %> <%= llamado.respuesta.usuario.apellido %>
                        <% } %>

                    </p>
                    <p class="estado-llamado-texto">

                        <% if(typeof llamado.respuesta.id === 'undefined' || llamado.data.finalizado == 1) { %>
                            Pendiente...
                        <% } else { %>
                            <%= llamado.respuesta.mensaje %>
                        <% } %>

                    </p>

                    <button class="boton-cancelar <%= typeof llamado.respuesta.id == 'undefined' ? '' : 'esconder' %>">Cancelar llamado</button>
                </div>
            </div>     
        <div class="columna columna-derecha">
            <div class="preceptores">
                <p class="preceptores-titulo">Preceptores activos</p>

                <div class="preceptores-contenedor">
                    <div class="preceptores-item">
                        <img src="img/user.png" alt="">
                        <p>Nombre del preceptor</p>
                    </div>
                </div>
            </div>
            <div class="perfil">
                <hr>
                <div class="perfil-info">
                    <p class="perfil-siglas"><%- usuario.nombre[0] %><%- usuario.apellido[0] %></p>
                    <div class="perfil-usuario">
                        <p class="perfil-nombre">
                            <%- usuario.nombre %>
                            <%- usuario.apellido %>
                        </p>
                        <p class="perfil-tipo-usuario">
                            <%- usuario.tipo_usuario %>
                        </p>
                    </div>
                </div>
                <a class="perfil-cerrar-sesion" href="/logout"><i class="fa-solid fa-right-from-bracket"></i>Cerrar sesi√≥n</a>
            </div>
        </div>
    </div>
</body>
</html>
